@using Turisticka_Agencija.Models
@{
    Layout = null;
    ViewBag.Title = "Informacije";
}

<!DOCTYPE html>

@{

    <!--INIT-->

    Aranzman aranzman = (Aranzman)HttpContext.Current.Application["aranzman"];
    List<SmestajnaJedinica> cena = (List<SmestajnaJedinica>)HttpContext.Current.Application["cena"];

    Korisnik korisnik = (Korisnik)HttpContext.Current.Session["korisnik"];

    <!--INIT-->

}

<html>

<head>
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="~/Content/CSS/flexboxgrid.css">
    <link rel="stylesheet" href="~/Content/CSS/style.css">
    <link rel="stylesheet" href="~/Scripts/OpenLayers/ol.css">
    <script src="~/Scripts/OpenLayers/ol.js"></script>
</head>

<body>

    <!-- GLAVNI MENI -->

    @{
        if (korisnik == null)
        {

            <header id="main-header">
                <div class="container">
                    <div class="row center-xs middle-xs middle-sm middle-md middle-lg">
                        <div class="start-sm start-md start-lg col-xs-12 col-sm-4 col-md-4 col-lg-4">
                            <h1><span class="primary-text">Travel</span>Fuge</h1>
                        </div>
                        <div class="end-sm end-md end-lg col-xs-12 col-sm-8 col-md-8 col-lg-8">
                            <nav id="navbar">
                                <ul>
                                    <li><a href="~/Home/Index">Home</a></li>
                                    <li><a href="~/Istorija/Index">Prethodni aranžmani</a></li>
                                    <li><a href="~/Login/Index">Prijava</a></li>
                                    <li><a href="~/Register/Index">Registracija</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </header>

        }

        else if (korisnik != null && korisnik.uloga.Equals(Uloga.TURISTA))
        {

            <header id="main-header">
                <div class="container">
                    <div class="row center-xs middle-xs middle-sm middle-md middle-lg">
                        <div class="start-sm start-md start-lg col-xs-12 col-sm-4 col-md-4 col-lg-4">
                            <h1><span class="primary-text">Travel</span>Fuge</h1>
                        </div>
                        <div class="end-sm end-md end-lg col-xs-12 col-sm-8 col-md-8 col-lg-8">
                            <nav id="navbar">
                                <ul>
                                    <li><a href="~/Home/Index">Home</a></li>
                                    <li><a href="~/Istorija/Index">Prethodni aranžmani</a></li>
                                    <li><a href="~/Profil/Index">Profil</a></li>
                                    <li><a href="~/Login/Odjava">Odjava</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </header>

        }

        else if (korisnik != null && korisnik.uloga.Equals(Uloga.MENADZER))
        {

            <header id="main-header">
                <div class="container">
                    <div class="row center-xs middle-xs middle-sm middle-md middle-lg">
                        <div class="start-sm start-md start-lg col-xs-12 col-sm-4 col-md-4 col-lg-4">
                            <h1><span class="primary-text">Travel</span>Fuge</h1>
                        </div>
                        <div class="end-sm end-md end-lg col-xs-12 col-sm-8 col-md-8 col-lg-8">
                            <nav id="navbar">
                                <ul>
                                    <li><a href="~/Home/Index">Home</a></li>
                                    <li><a href="~/Istorija/Index">Prethodni aranžmani</a></li>
                                    <li><a href="~/Profil/Index">Profil</a></li>
                                    <li><a href="~/Login/Odjava">Odjava</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </header>
        }

        else if (korisnik != null && korisnik.uloga.Equals(Uloga.ADMINISTRATOR))
        {

            <header id="main-header">
                <div class="container">
                    <div class="row center-xs middle-xs middle-sm middle-md middle-lg">
                        <div class="start-sm start-md start-lg col-xs-12 col-sm-4 col-md-4 col-lg-4">
                            <h1><span class="primary-text">Travel</span>Fuge</h1>
                        </div>
                        <div class="end-sm end-md end-lg col-xs-12 col-sm-8 col-md-8 col-lg-8">
                            <nav id="navbar">
                                <ul>
                                    <li><a href="~/Home/Index">Home</a></li>
                                    <li><a href="~/Istorija/Index">Prethodni aranžmani</a></li>
                                    <li><a href="~/Profil/Index">Profil</a></li>
                                    <li><a href="~/Login/Odjava">Odjava</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </header>

        }

    }

    <!-- GLAVNI MENI -->

    <!-- GLAVNI HEADER -->

    <section id="showcase">
        <div class="container">
            <div class="row center-xs center-sm center-md center-lg middle-sm">
                <div class="col-xs-10 col-sm-10 col-md-10 col-lg-7 showcase-content">
                    <h1>LETOVANJE 2021 uz <span class="primary-text">Travel</span>Fuge</h1>
                    <p style="color:white; font-size:25px; margin-top:10px">Ostvarite Vaš san</p>
                </div>
            </div>
        </div>
    </section>

    <!-- GLAVNI HEADER -->

    <!-- ARANZMANI -->

    <section id="offers">
        <div class="container">
            <div class="row center-xs center-sm center-md center-md">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <h2>@aranzman.naziv</h2>
                    <p>Dodatni popusti na  <span class="primary-text">online</span> rezervacije</p>
                    <img class="aranzman-detalji" src="@aranzman.posterAranzmana" /><br>
                    @aranzman.datumPocetkaPutovanja.ToString("dd/MM/yyyy") - @aranzman.datumZavrsetkaPutovanja.ToString("dd/MM/yyyy").
                    @{ int brojDana = (aranzman.datumZavrsetkaPutovanja - aranzman.datumPocetkaPutovanja).Days; }
                    @{
                        int najnizaCena = 0;

                        foreach (SmestajnaJedinica smestaj in aranzman.smestaj.smestajneJedinice)
                        {

                            <!-- PRONALAZENJE PRVE CENE U LISTI/NAJNIZE -->

                            foreach (SmestajnaJedinica s in cena)
                            {
                                if (s.nazivSmestaja == smestaj.nazivSmestaja)
                                {
                                    najnizaCena = s.cena;
                                }
                            }

                            <!-- PRONALAZENJE PRVE CENE U LISTI/NAJNIZE -->
                        }
                    }
                    @brojDana dana već od <span class="primary-text-cena">@najnizaCena</span>,<span class="gore">EUR</span><span class="dole">00</span>
                    <div class="row center-xs center-sm center-md center-md">

                        <!-- LOKACIJE -->

                        @{
                            <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                                <p style="text-align:justify;margin-top:25px;">
                                    Usluga: @aranzman.tipAranzmana.ToString().Replace('_', ' ')<br>
                                    Prevoz: @aranzman.tipPrevoza.ToString().Replace('_', ' ')<br>
                                    Destinacija: @aranzman.lokacija<br>
                                    Mesto polaska: @aranzman.mestoNalazenja.adresa<br>
                                    Vreme polaska: @aranzman.vremeNalazenja.ToString("hh':'mm")<br>
                                    Broj putnika: @aranzman.maksimalanBrojPutnika<br>
                                    Opis: @aranzman.opisAranzmana<br>
                                    Program: @aranzman.programPutovanja<br>
                                </p>
                                <form action="~/Smestaj/PrikazInformacijaSmestaja" method="post">
                                    <p style="text-align:justify;margin-bottom:25px;margin-top:-10px">
                                        <input type="text" name="naziv" value="@aranzman.naziv" hidden>
                                        Smestaj: @aranzman.smestaj.tipSmestaja.ToString() <input type="submit"
                                                                                                 style="background-color:transparent; color:#83905F; margin:-10px; font-size:17px"
                                                                                                 value="@aranzman.smestaj.naziv">
                                    </p>
                                </form>
                            </div>

                            <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8 map" id="map" />

                            <script>
                                var centerPoint = ol.proj.transform([@aranzman.mestoNalazenja.geoSirina, @aranzman.mestoNalazenja.geoDuzina], 'EPSG:4326', 'EPSG:3857');
                                    const map = new ol.Map({
                                        target: 'map',
                                        layers: [
                                            new ol.layer.Tile({
                                                source: new ol.source.OSM()
                                            })
                                        ],
                                        view: new ol.View({
                                            center: centerPoint,
                                            zoom: 15
                                        })

                                    });
                                var vectorLayer = new ol.layer.Vector({
                                    source: new ol.source.Vector({
                                        features: [new ol.Feature({
                                            geometry: new ol.geom.Point(centerPoint),
                                        })]
                                    }),
                                    style: new ol.style.Style({
                                        image: new ol.style.Icon({
                                        src: "../Content/Images/Point.png"
                                        })
                                    })
                                });

                                map.addLayer(vectorLayer);
                            </script>
                        }

                        <!-- LOKACIJE -->

                    </div>
                </div>
            </div>
    </section>

    <!-- ARANZMANI -->

    <!-- INFORMACIJE -->

    <section id="company">
        <div class="container">
            <div class="row">
                <div class="start-xs start-sm start-md start-lg col-xs-12 col-sm-3 col-md-3 col-lg-3">
                </div>
                <div class=" col-xs-12 col-sm-6 col-md-6 col-lg-6">
                    <h4 class="center-xs center-sm center-md center-lg">O nama</h4>
                    <p style="text-align:justify">
                        Turistička agencija <span class="primary-text">Travel</span>Fuge je sa vama od 1999. godine, kada smo započeli svoju misiju da svima
                        približimo mogućnost da na jednom mestu mogu pronaći sve turističke usluge.Turističke agencije koje zastupa Maestral Novi Sad – Argus tours,
                        Plana tours, Nitravel, Moj Svet, Turisttrade, Travelland, Aqua travel, Wayout, Dertour, Astra travel.
                    </p>
                </div>
                <div class="end-xs end-sm end-md end-lg col-xs-12 col-sm-3 col-md-4 col-lg-3">
                </div>
            </div>
        </div>
    </section>

    <!-- INFORMACIJE -->

    <!-- FOOTER -->

    <footer id="main-footer">
        <div class="container">
            <div class="row center-xs center-sm center-md center-lg">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <p>Copyright &copy; 2021 | TravelFuge</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- FOOTER -->

</body>

</html>
